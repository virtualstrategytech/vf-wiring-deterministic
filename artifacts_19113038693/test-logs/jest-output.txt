--- CI ENV SNAPSHOT ---
ACCEPT_EULA=Y
ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE=/opt/actionarchivecache
AGENT_TOOLSDIRECTORY=/opt/hostedtoolcache
ANDROID_HOME=/usr/local/lib/android/sdk
ANDROID_NDK=/usr/local/lib/android/sdk/ndk/27.3.13750724
ANDROID_NDK_HOME=/usr/local/lib/android/sdk/ndk/27.3.13750724
ANDROID_NDK_LATEST_HOME=/usr/local/lib/android/sdk/ndk/28.2.13676358
ANDROID_NDK_ROOT=/usr/local/lib/android/sdk/ndk/27.3.13750724
ANDROID_SDK_ROOT=/usr/local/lib/android/sdk
ANT_HOME=/usr/share/ant
AZURE_EXTENSION_DIR=/opt/az/azcliextensions
BOOTSTRAP_HASKELL_NONINTERACTIVE=1
BUSINESS_URL=
CHROMEWEBDRIVER=/usr/local/share/chromedriver-linux64
CHROME_BIN=/usr/bin/google-chrome
CI=true
CONDA=/usr/share/miniconda
DEBIAN_FRONTEND=noninteractive
DEBUG_TESTS=1
DEBUG_TESTS_LEVEL=3
DOTNET_MULTILEVEL_LOOKUP=0
DOTNET_NOLOGO=1
DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
EDGEWEBDRIVER=/usr/local/share/edge_driver
ENABLE_RUNNER_TRACING=true
GECKOWEBDRIVER=/usr/local/share/gecko_driver
GHCUP_INSTALL_BASE_PREFIX=/usr/local
GITHUB_ACTION=__run_3
GITHUB_ACTIONS=true
GITHUB_ACTION_REF=
GITHUB_ACTION_REPOSITORY=
GITHUB_ACTOR=virtualstrategytech
GITHUB_ACTOR_ID=47340974
GITHUB_API_URL=https://api.github.com
GITHUB_BASE_REF=feat/wiring-agent
GITHUB_ENV=/home/runner/work/_temp/_runner_file_commands/set_env_8a84936a-1994-433f-9b09-45e3e867767a
GITHUB_EVENT_NAME=pull_request
GITHUB_EVENT_PATH=/home/runner/work/_temp/_github_workflow/event.json
GITHUB_GRAPHQL_URL=https://api.github.com/graphql
GITHUB_HEAD_REF=fix/close-http-clients
GITHUB_JOB=test
GITHUB_OUTPUT=/home/runner/work/_temp/_runner_file_commands/set_output_8a84936a-1994-433f-9b09-45e3e867767a
GITHUB_PATH=/home/runner/work/_temp/_runner_file_commands/add_path_8a84936a-1994-433f-9b09-45e3e867767a
GITHUB_REF=refs/pull/11/merge
GITHUB_REF_NAME=11/merge
GITHUB_REF_PROTECTED=false
GITHUB_REF_TYPE=branch
GITHUB_REPOSITORY=virtualstrategytech/vf-wiring-deterministic
GITHUB_REPOSITORY_ID=1065938900
GITHUB_REPOSITORY_OWNER=virtualstrategytech
GITHUB_REPOSITORY_OWNER_ID=47340974
GITHUB_RETENTION_DAYS=90
GITHUB_RUN_ATTEMPT=1
GITHUB_RUN_ID=19113038693
GITHUB_RUN_NUMBER=313
GITHUB_SERVER_URL=https://github.com
GITHUB_SHA=b35a16a1d8aa2f74c18bcddf33b51bbddc5aa41e
GITHUB_STATE=/home/runner/work/_temp/_runner_file_commands/save_state_8a84936a-1994-433f-9b09-45e3e867767a
GITHUB_STEP_SUMMARY=/home/runner/work/_temp/_runner_file_commands/step_summary_8a84936a-1994-433f-9b09-45e3e867767a
GITHUB_TRIGGERING_ACTOR=virtualstrategytech
GITHUB_WORKFLOW=CI
GITHUB_WORKFLOW_REF=virtualstrategytech/vf-wiring-deterministic/.github/workflows/ci.yml@refs/pull/11/merge
GITHUB_WORKFLOW_SHA=b35a16a1d8aa2f74c18bcddf33b51bbddc5aa41e
GITHUB_WORKSPACE=/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic
GOROOT_1_22_X64=/opt/hostedtoolcache/go/1.22.12/x64
GOROOT_1_23_X64=/opt/hostedtoolcache/go/1.23.12/x64
GOROOT_1_24_X64=/opt/hostedtoolcache/go/1.24.9/x64
GOROOT_1_25_X64=/opt/hostedtoolcache/go/1.25.3/x64
GRADLE_HOME=/usr/share/gradle-9.2.0
HOME=/home/runner
HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS=3650
HOMEBREW_NO_AUTO_UPDATE=1
INVOCATION_ID=143f95cb7f9048d6ac2e6497a2a50eb3
ImageOS=ubuntu24
ImageVersion=20251030.96.2
JAVA_HOME=/usr/lib/jvm/temurin-17-jdk-amd64
JAVA_HOME_11_X64=/usr/lib/jvm/temurin-11-jdk-amd64
JAVA_HOME_17_X64=/usr/lib/jvm/temurin-17-jdk-amd64
JAVA_HOME_21_X64=/usr/lib/jvm/temurin-21-jdk-amd64
JAVA_HOME_25_X64=/usr/lib/jvm/temurin-25-jdk-amd64
JAVA_HOME_8_X64=/usr/lib/jvm/temurin-8-jdk-amd64
JOURNAL_STREAM=9:14573
LANG=C.UTF-8
LOGNAME=runner
MEMORY_PRESSURE_WATCH=/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure
MEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=
NODE_OPTIONS=--require /home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.instrumentation.js
NVM_DIR=/home/runner/.nvm
OLDPWD=/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic
PATH=/opt/hostedtoolcache/node/18.20.8/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
PIPX_BIN_DIR=/opt/pipx_bin
PIPX_HOME=/opt/pipx
POWERSHELL_DISTRIBUTION_CHANNEL=GitHub-Actions-ubuntu24
PROMPT_URL=
PWD=/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic
RETRIEVAL_URL=
RUNNER_ARCH=X64
RUNNER_ENVIRONMENT=github-hosted
RUNNER_NAME=GitHub Actions 1000001085
RUNNER_OS=Linux
RUNNER_TEMP=/home/runner/work/_temp
RUNNER_TOOL_CACHE=/opt/hostedtoolcache
RUNNER_TRACKING_ID=github_21cfac7e-5653-406f-831f-bb344a6a3231
RUNNER_WORKSPACE=/home/runner/work/vf-wiring-deterministic
SELENIUM_JAR_PATH=/usr/share/java/selenium-server.jar
SGX_AESM_ADDR=1
SHELL=/bin/bash
SHLVL=2
SKIP_BODY_PARSER=1
SKIP_SMOKE=true
SKIP_SYNC_SECRET=true
SWIFT_PATH=/usr/share/swift/usr/bin
SYSTEMD_EXEC_PID=1875
USER=runner
USE_CHILD_PROCESS_SERVER=1
VCPKG_INSTALLATION_ROOT=/usr/local/share/vcpkg
WEBHOOK_API_KEY=E7STukD41sGo9PMDxd/5zn8wJGEYpqrLhws14aIRr0Y=
XDG_CONFIG_HOME=/home/runner/.config
XDG_RUNTIME_DIR=/run/user/1001
_=/usr/bin/env
--- STARTING JEST ---
globalSetup skipped in CI / SKIP_SYNC_SECRET=true
  console.warn
    DEBUG test-file loaded: webhook.smoke.test.js ts:2025-11-05T18:58:46.156Z

    [0m [90m 29 |[39m [90m// non-secret (no env values printed).[39m
     [90m 30 |[39m [36mtry[39m {
    [31m[1m>[22m[39m[90m 31 |[39m   console[33m.[39mwarn(
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 32 |[39m     [32m`DEBUG test-file loaded: ${path.basename(__filename)} ts:${new Date().toISOString()}`[39m
     [90m 33 |[39m   )[33m;[39m
     [90m 34 |[39m } [36mcatch[39m {}[0m

      at Object.<anonymous> (tests/webhook.smoke.test.js:31:11)

  console.error
    DEBUG_TESTS: nock.enableNetConnect() invoked in smoke test

    [0m [90m  97 |[39m [36mfunction[39m writeDebugLog(line) {
     [90m  98 |[39m   [36mtry[39m {
    [31m[1m>[22m[39m[90m  99 |[39m     console[33m.[39merror(line)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 100 |[39m   } [36mcatch[39m {}
     [90m 101 |[39m   [36mtry[39m {
     [90m 102 |[39m     [90m// best-effort: write to a stable repo artifacts folder so CI/workers on Windows[39m[0m

      at writeDebugLog (tests/webhook.smoke.test.js:99:13)
      at Object.<anonymous> (tests/webhook.smoke.test.js:45:7)

  console.error
    DEBUG test-file loaded: webhook.smoke.test.js ts:2025-11-05T18:58:46.187Z

    [0m [90m  97 |[39m [36mfunction[39m writeDebugLog(line) {
     [90m  98 |[39m   [36mtry[39m {
    [31m[1m>[22m[39m[90m  99 |[39m     console[33m.[39merror(line)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 100 |[39m   } [36mcatch[39m {}
     [90m 101 |[39m   [36mtry[39m {
     [90m 102 |[39m     [90m// best-effort: write to a stable repo artifacts folder so CI/workers on Windows[39m[0m

      at writeDebugLog (tests/webhook.smoke.test.js:99:13)
      at Object.<anonymous> (tests/webhook.smoke.test.js:53:5)

  console.warn
    SKIP_SMOKE=true, skipping webhook smoke tests

    [0m [90m 113 |[39m     [90m// Skip entire smoke suite in CI when no deployed service is available[39m
     [90m 114 |[39m     [90m// Provide a dummy test so Jest doesn't treat the file as empty (which fails)[39m
    [31m[1m>[22m[39m[90m 115 |[39m     console[33m.[39mwarn([32m'SKIP_SMOKE=true, skipping webhook smoke tests'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 116 |[39m     test([32m'skipped in CI'[39m[33m,[39m () [33m=>[39m {
     [90m 117 |[39m       expect([36mtrue[39m)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 118 |[39m     })[33m;[39m[0m

      at tests/webhook.smoke.test.js:115:13
      at Object.<anonymous> (tests/webhook.smoke.test.js:111:1)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=6

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":true,"pending":true}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[3] summary: {"idx":3,"type":"Socket","destroyed":true,"pending":true}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[4] summary: {"idx":4,"type":"ChildProcess","destroyed":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[5] summary: {"idx":5,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=1063 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=1077 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=1080 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

PASS tests/webhook.smoke.test.js
  webhook smoke
    âœ“ skipped in CI (3 ms)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    [2025-11-05T18:58:47.385Z] GET /health rid=no-request-id

      at novain-platform/webhook/server.js:263:11

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    [2025-11-05T18:58:47.427Z] POST /webhook rid=no-request-id

      at novain-platform/webhook/server.js:263:11

  console.warn
    unauthorized: key mismatch

    [0m [90m 333 |[39m   [36mconst[39m expected [33m=[39m getApiKey()[33m;[39m
     [90m 334 |[39m   [36mif[39m (key [33m!==[39m expected) {
    [31m[1m>[22m[39m[90m 335 |[39m     console[33m.[39mwarn([32m'unauthorized: key mismatch'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 336 |[39m     [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({ ok[33m:[39m [36mfalse[39m[33m,[39m reply[33m:[39m [32m'unauthorized'[39m })[33m;[39m
     [90m 337 |[39m   }
     [90m 338 |[39m   {[0m

      at novain-platform/webhook/server.js:335:13
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at novain-platform/webhook/server.js:264:3
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:91:12)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at novain-platform/webhook/server.js:249:3
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Readable.<anonymous> (novain-platform/webhook/server.js:192:9)

  console.warn
    DEBUG: active handles summary:

    [0m [90m 214 |[39m           [36mconst[39m handles [33m=[39m process[33m.[39m_getActiveHandles() [33m||[39m [][33m;[39m
     [90m 215 |[39m           [36mtry[39m {
    [31m[1m>[22m[39m[90m 216 |[39m             console[33m.[39mwarn([32m'DEBUG: active handles summary:'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 217 |[39m           } [36mcatch[39m {}
     [90m 218 |[39m           handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 219 |[39m             [36mtry[39m {[0m

      at tests/webhook.inprocess.test.js:216:21

  console.warn
      [0] type=Socket str=[object Object]

    [0m [90m 221 |[39m               [36mconst[39m s [33m=[39m [33mString[39m(h [33m||[39m [32m''[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m400[39m)[33m;[39m
     [90m 222 |[39m               [36mtry[39m {
    [31m[1m>[22m[39m[90m 223 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)} str=${s}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 224 |[39m               } [36mcatch[39m {}
     [90m 225 |[39m             } [36mcatch[39m (e) {
     [90m 226 |[39m               [36mtry[39m {[0m

      at forEach (tests/webhook.inprocess.test.js:223:25)
          at Array.forEach (<anonymous>)
      at tests/webhook.inprocess.test.js:218:19

  console.warn
      [1] type=Socket str=[object Object]

    [0m [90m 221 |[39m               [36mconst[39m s [33m=[39m [33mString[39m(h [33m||[39m [32m''[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m400[39m)[33m;[39m
     [90m 222 |[39m               [36mtry[39m {
    [31m[1m>[22m[39m[90m 223 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)} str=${s}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 224 |[39m               } [36mcatch[39m {}
     [90m 225 |[39m             } [36mcatch[39m (e) {
     [90m 226 |[39m               [36mtry[39m {[0m

      at forEach (tests/webhook.inprocess.test.js:223:25)
          at Array.forEach (<anonymous>)
      at tests/webhook.inprocess.test.js:218:19

  console.warn
      [2] type=Socket str=[object Object]

    [0m [90m 221 |[39m               [36mconst[39m s [33m=[39m [33mString[39m(h [33m||[39m [32m''[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m400[39m)[33m;[39m
     [90m 222 |[39m               [36mtry[39m {
    [31m[1m>[22m[39m[90m 223 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)} str=${s}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 224 |[39m               } [36mcatch[39m {}
     [90m 225 |[39m             } [36mcatch[39m (e) {
     [90m 226 |[39m               [36mtry[39m {[0m

      at forEach (tests/webhook.inprocess.test.js:223:25)
          at Array.forEach (<anonymous>)
      at tests/webhook.inprocess.test.js:218:19

  console.warn
    DEBUG: captured listen callbacks count = 0

    [0m [90m 245 |[39m       [36mtry[39m {
     [90m 246 |[39m         [36mtry[39m {
    [31m[1m>[22m[39m[90m 247 |[39m           console[33m.[39mwarn([32m'DEBUG: captured listen callbacks count ='[39m[33m,[39m cbs[33m.[39mlength)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 248 |[39m         } [36mcatch[39m {}
     [90m 249 |[39m         cbs[33m.[39mforEach((cb[33m,[39m idx) [33m=>[39m {
     [90m 250 |[39m           [36mtry[39m {[0m

      at tests/webhook.inprocess.test.js:247:19

FAIL tests/webhook.inprocess.test.js
  Webhook (in-process)
    âœ“ GET /health returns ok (228 ms)
    âœ• POST /webhook ping responds with reply (54 ms)

  â— Webhook (in-process) â€º POST /webhook ping responds with reply

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 200 |[39m       body[33m,[39m
     [90m 201 |[39m     })[33m;[39m
    [31m[1m>[22m[39m[90m 202 |[39m     expect(res[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 203 |[39m     [36mconst[39m json [33m=[39m res[33m.[39mbody[33m;[39m
     [90m 204 |[39m     expect(json)[33m.[39mtoBeDefined()[33m;[39m
     [90m 205 |[39m     expect(json[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/webhook.inprocess.test.js:202:24)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.log
    RETRIEVAL_URL set: false

      at Object.<anonymous> (novain-platform/webhook/server.js:145:11)

  console.info
    PROMPT_URL set: true BUSINESS_URL set: false

      at Object.<anonymous> (novain-platform/webhook/server.js:146:11)

  console.info
    WEBHOOK_API_KEY present: true

      at Object.<anonymous> (novain-platform/webhook/server.js:148:11)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=2234 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=2247 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=2249 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

PASS tests/debug_llm_logging.test.js
  llm payload logging when DEBUG_WEBHOOK=true
    âœ“ logs llm payload snippet when enabled (475 ms)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:48.981Z] POST /webhook rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    webhook: action=llm_elicit name=Guest tenantId=t

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:19:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:19:25)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:19:25)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:19:25)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:19:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:39:24)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:39:24)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:39:24)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:39:24)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:49.389Z] POST /webhook rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    webhook: action=invoke_component name=Guest tenantId=t

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:48:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:48:25)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:48:25)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:48:25)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:48:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:73:24)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:73:24)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:73:24)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at Object.<anonymous> (tests/regression_raw_mirror.test.js:73:24)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=2874 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=2886 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=2888 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

PASS tests/regression_raw_mirror.test.js
  regression: raw/data.raw mirror
    âœ“ llm_elicit returns raw and data.raw with same payload (419 ms)
    âœ“ invoke_component returns raw and data.raw with same payload (420 ms)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:50.301Z] POST /webhook rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    webhook: action=llm_elicit name=Guest tenantId=default

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/llm_stub.test.js:33:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/llm_stub.test.js:33:25)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/llm_stub.test.js:33:25)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/llm_stub.test.js:33:25)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/llm_stub.test.js:33:25)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=3326 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=3338 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=3340 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

PASS tests/llm_stub.test.js
  llm_elicit stub behavior
    âœ“ POST /webhook llm_elicit returns stub when PROMPT_URL not set (410 ms)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:51.289Z] POST /webhook rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    webhook: action=llm_elicit name=Guest tenantId=default

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/in_process.test.js:20:20)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/in_process.test.js:20:20)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/in_process.test.js:20:20)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/in_process.test.js:20:20)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/in_process.test.js:20:20)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=3779 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=3791 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=3793 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

PASS tests/in_process.test.js
  in-process webhook app (refactored)
    âœ“ returns llm_elicit stub with source "stub" (480 ms)

  console.info
    DEBUG_TESTS: fetchFn present at module init? true

      at Object.<anonymous> (novain-platform/webhook/server.js:45:15)

  console.info
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Object.<anonymous> (novain-platform/webhook/server.js:160:11)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:52.209Z] GET /health rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:14:17)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:14:17)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:14:17)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:14:17)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:14:17)

  console.log
    DEBUG_TESTS: fetchFn present at module init? true

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    SKIP_BODY_PARSER set â€” using lightweight JSON body parser (test mode)

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.log
    [2025-11-05T18:58:52.658Z] POST /webhook rid=no-request-id

      at Socket.<anonymous> (tests/helpers/request-helper.js:176:23)

  console.error
    unauthorized: key mismatch

    [0m [90m 181 |[39m           child[33m.[39mstderr[33m.[39mon([32m'data'[39m[33m,[39m (b) [33m=>[39m {
     [90m 182 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 183 |[39m               console[33m.[39merror([33mString[39m(b [33m||[39m [32m''[39m)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 184 |[39m             } [36mcatch[39m {}
     [90m 185 |[39m           })[33m;[39m
     [90m 186 |[39m         }[0m

      at Socket.<anonymous> (tests/helpers/request-helper.js:183:23)

  console.warn
    DEBUG_TESTS: killing 1 tracked test child process(es)

    [0m [90m 14 |[39m     [90m// don't fail because of logging.[39m
     [90m 15 |[39m     [36mif[39m ([36mtypeof[39m console [33m!==[39m [32m'undefined'[39m [33m&&[39m [36mtypeof[39m console[33m.[39mwarn [33m===[39m [32m'function'[39m) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39mwarn([33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m     }
     [90m 18 |[39m   } [36mcatch[39m {
     [90m 19 |[39m     [36mvoid[39m [35m0[39m[33m;[39m[0m

      at _debugWarn (tests/helpers/server-helper.js:16:15)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:578:9)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:21:17)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:21:17)

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:21:17)

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:21:17)

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at requestApp (tests/helpers/request-helper.js:306:28)
      at Object.<anonymous> (tests/verify_in_process.test.js:21:17)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=3

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: raw active handles dump (summary):

    [0m [90m 523 |[39m         [36mtry[39m {
     [90m 524 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
    [31m[1m>[22m[39m[90m 525 |[39m             console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (summary):'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 526 |[39m             handles[33m.[39mforEach((h[33m,[39m i) [33m=>[39m {
     [90m 527 |[39m               [36mtry[39m {
     [90m 528 |[39m                 [36mconst[39m name [33m=[39m h [33m&&[39m h[33m.[39mconstructor [33m&&[39m h[33m.[39mconstructor[33m.[39mname[33m;[39m[0m

      at tests/jest.setup.js:525:21

  console.warn
      [0] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [1] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
      [2] type=Socket

    [0m [90m 543 |[39m                   }
     [90m 544 |[39m                 } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 545 |[39m                 console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 546 |[39m               } [36mcatch[39m {}
     [90m 547 |[39m             })[33m;[39m
     [90m 548 |[39m           }[0m

      at forEach (tests/jest.setup.js:545:25)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:526:21

  console.warn
    DEBUG_TESTS: raw active handles dump (detailed):

    [0m [90m 552 |[39m           [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m [33m&&[39m verbose) {
     [90m 553 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 554 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: raw active handles dump (detailed):'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 555 |[39m
     [90m 556 |[39m               [90m// Test-only: wrap require('raw-body') to tag the incoming stream with a[39m
     [90m 557 |[39m               [90m// creation stack when DEBUG_TESTS is set. body-parser/raw-body sometimes[39m[0m

      at tests/jest.setup.js:554:23

  console.warn
      [0] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [1] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
      [2] type=Socket

    [0m [90m 618 |[39m                     }
     [90m 619 |[39m                   } [36mcatch[39m {}
    [31m[1m>[22m[39m[90m 620 |[39m                   console[33m.[39mwarn([32m`  [${i}] type=${String(name)}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 621 |[39m                   [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 622 |[39m                     console[33m.[39mwarn([32m'    created at:'[39m)[33m;[39m
     [90m 623 |[39m                     (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at forEach (tests/jest.setup.js:620:27)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:601:23

  console.warn
    DEBUG_TESTS: async_handle_map entries:

    [0m [90m 644 |[39m           ) {
     [90m 645 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 646 |[39m               console[33m.[39mwarn([32m'DEBUG_TESTS: async_handle_map entries:'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 647 |[39m               [36mfor[39m ([36mconst[39m [id[33m,[39m info] [36mof[39m global[33m.[39m__async_handle_map[33m.[39mentries()) {
     [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m[0m

      at tests/jest.setup.js:646:23

  console.warn
      asyncId=4433 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=4445 type=Timeout

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at initAsyncResource (node:internal/timers:164:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at new Timeout (node:internal/timers:198:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
      asyncId=4447 type=TickObject

    [0m [90m 648 |[39m                 [36mtry[39m {
     [90m 649 |[39m                   [36mconst[39m type [33m=[39m info [33m&&[39m info[33m.[39mtype [33m?[39m info[33m.[39mtype [33m:[39m [32m'<unknown>'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 650 |[39m                   console[33m.[39mwarn([32m`  asyncId=${id} type=${type}`[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 651 |[39m                   [36mif[39m (info [33m&&[39m info[33m.[39mstack) {
     [90m 652 |[39m                     [36mtry[39m {
     [90m 653 |[39m                       [36mconst[39m lines [33m=[39m [33mString[39m(info[33m.[39mstack)[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at tests/jest.setup.js:650:27

  console.warn
        Error: handle-init

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at AsyncHook.init (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:266:21)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitNative (node:internal/async_hooks:200:43)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at emitInitScript (node:internal/async_hooks:503:3)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at process.nextTick (node:internal/process/task_queues:132:5)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

  console.warn
        at onwrite (node:internal/streams/writable:477:17)

    [0m [90m 654 |[39m                       lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 655 |[39m                         [36mtry[39m {
    [31m[1m>[22m[39m[90m 656 |[39m                           console[33m.[39mwarn([32m'    '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 657 |[39m                         } [36mcatch[39m {}
     [90m 658 |[39m                       })[33m;[39m
     [90m 659 |[39m                     } [36mcatch[39m {}[0m

      at forEach (tests/jest.setup.js:656:35)
          at Array.forEach (<anonymous>)
      at tests/jest.setup.js:654:29

FAIL tests/verify_in_process.test.js
  in-process app smoke
    âœ“ GET /health returns ok (444 ms)
    âœ• POST /webhook ping (in-process) works with API key (444 ms)

  â— in-process app smoke â€º POST /webhook ping (in-process) works with API key

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 26 |[39m     })[33m;[39m
     [90m 27 |[39m
    [31m[1m>[22m[39m[90m 28 |[39m     expect(res[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 29 |[39m     expect(res[33m.[39mbody [33m&&[39m res[33m.[39mbody[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 30 |[39m     expect([36mtypeof[39m (res[33m.[39mbody [33m&&[39m res[33m.[39mbody[33m.[39mreply))[33m.[39mtoBe([32m'string'[39m)[33m;[39m
     [90m 31 |[39m     expect(res[33m.[39mbody [33m&&[39m res[33m.[39mbody[33m.[39mport)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/verify_in_process.test.js:28:24)

  console.warn
    DEBUG_TESTS: sweeping active handles, count=5

    [0m [90m 760 |[39m     [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 761 |[39m       [36mtry[39m {
    [31m[1m>[22m[39m[90m 762 |[39m         console[33m.[39mwarn([32m'DEBUG_TESTS: sweeping active handles, count='[39m [33m+[39m handles[33m.[39mlength)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 763 |[39m         [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m handles[33m.[39mlength[33m;[39m i[33m++[39m) {
     [90m 764 |[39m           [36mtry[39m {
     [90m 765 |[39m             [36mconst[39m h [33m=[39m handles[i][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:762:17)
      at tests/jest.setup.js:501:24

  console.warn
      handle[0] summary: {"idx":0,"type":"Socket","destroyed":false,"fd":1,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[1] summary: {"idx":1,"type":"Socket","destroyed":false,"fd":2,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[2] summary: {"idx":2,"type":"Socket","destroyed":false,"fd":0,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[3] summary: {"idx":3,"type":"Server","destroyed":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
      handle[4] summary: {"idx":4,"type":"Socket","destroyed":false,"pending":false}

    [0m [90m 790 |[39m             } [36mcatch[39m {}
     [90m 791 |[39m             [36mtry[39m {
    [31m[1m>[22m[39m[90m 792 |[39m               console[33m.[39mwarn([32m`  handle[${i}] summary: ${JSON.stringify(info)}`[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 793 |[39m             } [36mcatch[39m {}
     [90m 794 |[39m             [36mtry[39m {
     [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:792:23)
      at tests/jest.setup.js:501:24

  console.warn
        createdStack-preview:

    [0m [90m 795 |[39m               [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 796 |[39m                 [36mtry[39m {
    [31m[1m>[22m[39m[90m 797 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 798 |[39m                 } [36mcatch[39m {}
     [90m 799 |[39m                 [36mtry[39m {
     [90m 800 |[39m                   [36mconst[39m lines [33m=[39m h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [][33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:797:27)
      at tests/jest.setup.js:501:24

  console.warn
          Error: agent-proto-socket-created

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.createConnectionProtoWithStack [as createConnection] (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:131:36)

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.createSocket (node:_http_agent:341:26)

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.addRequest (node:_http_agent:288:10)

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
          at new ClientRequest (node:_http_client:342:16)

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
          at Object.request (node:http:100:10)

    [0m [90m 801 |[39m                   lines[33m.[39mforEach((ln) [33m=>[39m {
     [90m 802 |[39m                     [36mtry[39m {
    [31m[1m>[22m[39m[90m 803 |[39m                       console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 804 |[39m                     } [36mcatch[39m {}
     [90m 805 |[39m                   })[33m;[39m
     [90m 806 |[39m                 } [36mcatch[39m {}[0m

      at forEach (tests/helpers/server-helper.js:803:31)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:801:25)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: attempted cleanup handle[3] name=Server

    [0m [90m 1010 |[39m             [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 1011 |[39m               [36mtry[39m {
    [31m[1m>[22m[39m[90m 1012 |[39m                 console[33m.[39mwarn([32m`DEBUG_TESTS: attempted cleanup handle[${i}] name=${String(name)}`[39m)[33m;[39m
     [90m      |[39m                         [31m[1m^[22m[39m
     [90m 1013 |[39m                 [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1012:25)
      at tests/jest.setup.js:501:24

  console.warn
    DEBUG_TESTS: attempted cleanup handle[4] name=Socket

    [0m [90m 1010 |[39m             [36mif[39m (process[33m.[39menv[33m.[39m[33mDEBUG_TESTS[39m) {
     [90m 1011 |[39m               [36mtry[39m {
    [31m[1m>[22m[39m[90m 1012 |[39m                 console[33m.[39mwarn([32m`DEBUG_TESTS: attempted cleanup handle[${i}] name=${String(name)}`[39m)[33m;[39m
     [90m      |[39m                         [31m[1m^[22m[39m
     [90m 1013 |[39m                 [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
     [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1012:25)
      at tests/jest.setup.js:501:24

  console.warn
        createdStack-preview:

    [0m [90m 1012 |[39m                 console[33m.[39mwarn([32m`DEBUG_TESTS: attempted cleanup handle[${i}] name=${String(name)}`[39m)[33m;[39m
     [90m 1013 |[39m                 [36mif[39m (h [33m&&[39m [36mtypeof[39m h[33m.[39m_createdStack [33m===[39m [32m'string'[39m) {
    [31m[1m>[22m[39m[90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m      |[39m                           [31m[1m^[22m[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
     [90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m 1017 |[39m                   )[33m;[39m[0m

      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1014:27)
      at tests/jest.setup.js:501:24

  console.warn
          Error: agent-proto-socket-created

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.createConnectionProtoWithStack [as createConnection] (/home/runner/work/vf-wiring-deterministic/vf-wiring-deterministic/tests/jest.setup.js:131:36)

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.createSocket (node:_http_agent:341:26)

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

  console.warn
          at Agent.addRequest (node:_http_agent:288:10)

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

  console.warn
          at new ClientRequest (node:_http_client:342:16)

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

  console.warn
          at Object.request (node:http:100:10)

    [0m [90m 1014 |[39m                   console[33m.[39mwarn([32m'    createdStack-preview:'[39m)[33m;[39m
     [90m 1015 |[39m                   (h[33m.[39m_createdStack[33m.[39msplit([32m'\n'[39m)[33m.[39mslice([35m0[39m[33m,[39m [35m6[39m) [33m||[39m [])[33m.[39mforEach((ln) [33m=>[39m
    [31m[1m>[22m[39m[90m 1016 |[39m                     console[33m.[39mwarn([32m'      '[39m [33m+[39m [33mString[39m(ln)[33m.[39mtrim())
     [90m      |[39m                             [31m[1m^[22m[39m
     [90m 1017 |[39m                   )[33m;[39m
     [90m 1018 |[39m                 }
     [90m 1019 |[39m               } [36mcatch[39m {[0m

      at forEach (tests/helpers/server-helper.js:1016:29)
          at Array.forEach (<anonymous>)
      at Object._forceCloseAllSockets (tests/helpers/server-helper.js:1015:67)
      at tests/jest.setup.js:501:24

